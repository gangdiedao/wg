(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d69a8044"],{"001e":function(e,t,i){"use strict";var a=i("e0bb"),n=i.n(a);n.a},"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var l=o(),s=e-l,r=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=r;var o=Math.easeInOutQuad(u,l,s,t);n(o),u<t?a(e):i&&"function"===typeof i&&i()};c()}},"7a9c":function(e,t,i){"use strict";var a={zh:{organization:{menuModules:{field:{folder:"目录",menu:"菜单",nodeType:"节点类型",nodeName:"节点名称",parentNode:"上级节点",icon:"节点图标",sort:"排序号",filepath:"文件路径",router:"节点路由",auth:"权限",updateTime:"更新时间",action:"操作"}},userModules:{field:{user:"用户",name:"姓名",nameEn:"英文名",username:"用户名",email:"邮箱",phone:"联系电话",role:"角色",status:"状态",remark:"备注",nationality:"国籍",deptname:"部门名称",createTime:"创建时间",password:"密码",action:"操作"},label:{department:"部门",select:"选择",transfer:"转移"},status:{publish:"开启",draft:"关闭",all:"全部"}},roleModules:{field:{name:"角色名称",nameEn:"角色英文名称",mark:"标识",remark:"备注",action:"操作"}},deptModules:{field:{name:"部门名称",nameEn:"部门英文名称",parent:"上级部门",sort:"排序",action:"操作"}}}},en:{organization:{field:{user:"USER",name:"姓名",username:"用户名",email:"邮箱",phone:"手机号",role:"角色",status:"状态",remark:"备注"},status:{publish:"开启",draft:"关闭",all:"全部"}}}},n="organization";t["a"]={created:function(){this.$i18n.getLocaleMessage("zh")[n]||(this.$i18n.mergeLocaleMessage("en",a.en),this.$i18n.mergeLocaleMessage("zh",a.zh))},methods:{assign:function(e,t){for(var i in e)void 0!==t[i]&&(e[i]=t[i]);return e}}}},8607:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("actions.create")))]),e._v(" "),i("el-button",{attrs:{type:"danger",disabled:!e.multipleSelection.length,size:"mini"},on:{click:function(t){return e.handleDelete("all")}}},[e._v(e._s(e.$t("actions.delete")))])],1),e._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v(e._s(e.$t("actions.search")))])],1)],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"",prop:"name",label:e.$t("organization.roleModules.field.name")}}),e._v(" "),i("el-table-column",{attrs:{prop:"name_en",label:e.$t("organization.roleModules.field.nameEn")}}),e._v(" "),i("el-table-column",{attrs:{prop:"slug",label:e.$t("organization.roleModules.field.mark")}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:e.$t("organization.roleModules.field.action")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v(e._s(e.$t("actions.edit")))]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("actions.delete")))])]}}])})],1),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"end"}},[i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1),e._v(" "),i("edit-role",{attrs:{show:e.showEditRole,item:e.roleItem},on:{"update:show":function(t){e.showEditRole=t},success:e.getList}})],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"destroy-on-close":!0,width:"720px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:e.$t("organization.roleModules.field.name"),prop:"name"}},[i("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("organization.roleModules.field.nameEn")}},[i("el-input",{model:{value:e.ruleForm.name_en,callback:function(t){e.$set(e.ruleForm,"name_en",t)},expression:"ruleForm.name_en"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("organization.roleModules.field.mark"),prop:"slug"}},[i("el-input",{model:{value:e.ruleForm.slug,callback:function(t){e.$set(e.ruleForm,"slug",t)},expression:"ruleForm.slug"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("organization.roleModules.field.remark")}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.describe,callback:function(t){e.$set(e.ruleForm,"describe",t)},expression:"ruleForm.describe"}})],1),e._v(" "),i("el-form-item",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("div",[e._v("功能权限")]),e._v(" "),i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"tree",staticClass:"filter-tree",staticStyle:{height:"260px","overflow-y":"auto"},attrs:{"node-key":"id",data:e.roleMenu,"show-checkbox":!0,"default-checked-keys":e.ruleForm.menu_id,props:{children:"childs",label:"title"},"filter-node-method":e.filterNode},on:{check:e.handleClickMenu}})],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[e._v("数据权限")]),e._v(" "),i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterDataText,callback:function(t){e.filterDataText=t},expression:"filterDataText"}}),e._v(" "),i("el-tree",{ref:"treedata",staticClass:"filter-tree",staticStyle:{height:"260px","overflow-y":"auto"},attrs:{"node-key":"id",data:e.deptList,"show-checkbox":!0,"default-checked-keys":e.ruleForm.department_id,props:{children:"childs",label:"name"},"filter-node-method":e.filterNode},on:{check:e.handleClickDept}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n      "+e._s(e.$t("actions.cancel"))+"\n    ")]),e._v(" "),i("el-button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("\n      "+e._s(e.$t("actions.confirm"))+"\n    ")])],1)],1)},l=[],s=(i("7f7f"),i("db72")),r=i("7a9c"),u=i("2f62"),c=i("d368"),d={mixins:[r["a"]],props:{show:{type:Boolean,default:!1},item:""},watch:{dialogFormVisible:function(e){e||this.$emit("update:show",!1)},show:function(e){this.dialogFormVisible=e,e&&(this.item?(this.ruleForm=this.assign(this.ruleForm,this.item),this.dialogStatus="update"):(this.ruleForm={id:void 0,name:"",name_en:"",describe:"",slug:"",menu_id:[],department_id:[]},this.dialogStatus="create"))},filterText:function(e){this.$refs.tree.filter(e)},filterDataText:function(e){this.$refs.treedata.filter(e)}},computed:Object(s["a"])({},Object(u["b"])(["deptList","roleMenu"])),created:function(){this.deptList.length||this.$store.dispatch("organization/getDeptList",{page:1,limit:500}),this.roleMenu.length||this.$store.dispatch("organization/getMenus")},data:function(){return{submitLoading:!1,dialogFormVisible:this.show,dialogStatus:this.item?"update":"create",textMap:{update:"".concat(this.$t("actions.edit")),create:"".concat(this.$t("actions.create"))},ruleForm:{id:void 0,name:"",name_en:"",describe:"",slug:"",menu_id:[],department_id:[]},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],slug:[{required:!0,message:"请输入标识",trigger:"blur"}]},filterText:"",filterDataText:""}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleClickDept:function(e,t){var i=t.checkedKeys;this.ruleForm.department_id=i},handleClickMenu:function(e,t){var i=t.checkedKeys;this.ruleForm.menu_id=i},close:function(){this.dialogFormVisible=!1},createData:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&(e.submitLoading=!0,Object(c["b"])(e.ruleForm).then((function(){e.$message({message:"success",type:"success"}),e.$emit("success"),e.$store.dispatch("organization/getRoleList",{page:1,limit:1e3}),e.close()})).finally((function(){e.submitLoading=!1})))}))},updateData:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&(e.submitLoading=!0,Object(c["m"])(e.ruleForm).then((function(){e.$message({message:"success",type:"success"}),e.$emit("success"),e.$store.dispatch("organization/getRoleList",{page:1,limit:1e3}),e.close()})).finally((function(){e.submitLoading=!1})))}))}}},m=d,f=i("2877"),p=Object(f["a"])(m,o,l,!1,null,null,null),h=p.exports,g=i("333d"),b={name:"roleManage",mixins:[r["a"]],components:{Pagination:g["a"],EditRole:h},created:function(){this.getList()},data:function(){return{showEditRole:!1,roleItem:"",total:10,listQuery:{page:1,limit:20,keyword:""},multipleSelection:[],tableData:[]}},methods:{handleAdd:function(){this.showEditRole=!0,this.roleItem=""},handleEdit:function(e){this.roleItem=e,this.showEditRole=!0},handleSelectionChange:function(e){this.multipleSelection=e},search:function(){this.listQuery.page=1,this.getList()},getList:function(){var e=this;Object(c["h"])(this.listQuery).then((function(t){e.total=t.data.count,e.tableData=t.data.data}))},handleDelete:function(e){var t,i=this;t="all"===e?this.multipleSelection.map((function(e){return e.id})):[e.id],this.$confirm("确定要删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["e"])({id:t}).then((function(){i.$message({type:"success",message:"删除成功!"}),i.getList()}))})).catch((function(){}))}}},v=b,y=(i("001e"),Object(f["a"])(v,a,n,!1,null,null,null));t["default"]=y.exports},e0bb:function(e,t,i){}}]);