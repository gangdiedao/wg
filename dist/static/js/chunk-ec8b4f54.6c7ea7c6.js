(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec8b4f54"],{"1e8b":function(e,t,n){},7516:function(e,t,n){"use strict";var a=n("1e8b"),i=n.n(a);i.a},"7a9c":function(e,t,n){"use strict";var a={zh:{organization:{menuModules:{field:{folder:"目录",menu:"菜单",nodeType:"节点类型",nodeName:"节点名称",parentNode:"上级节点",icon:"节点图标",sort:"排序号",filepath:"文件路径",router:"节点路由",auth:"权限",updateTime:"更新时间",action:"操作"}},userModules:{field:{user:"用户",name:"姓名",nameEn:"英文名",username:"用户名",email:"邮箱",phone:"联系电话",role:"角色",status:"状态",remark:"备注",nationality:"国籍",deptname:"部门名称",createTime:"创建时间",password:"密码",action:"操作"},label:{department:"部门",select:"选择",transfer:"转移"},status:{publish:"开启",draft:"关闭",all:"全部"}},deptModules:{field:{name:"部门名称",nameEn:"部门英文名称",parent:"上级部门",sort:"排序",action:"操作"}}}},en:{organization:{field:{user:"USER",name:"姓名",username:"用户名",email:"邮箱",phone:"手机号",role:"角色",status:"状态",remark:"备注"},status:{publish:"开启",draft:"关闭",all:"全部"}}}},i="organization";t["a"]={created:function(){this.$i18n.getLocaleMessage("zh")[i]||(this.$i18n.mergeLocaleMessage("en",a.en),this.$i18n.mergeLocaleMessage("zh",a.zh))},methods:{assign:function(e,t){for(var n in e)t[n]&&(e[n]=t[n]);return e}}}},"8ef4":function(e,t,n){},"986f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("actions.create")))])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.deptList,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"childs",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:e.$t("organization.deptModules.field.name"),width:"360"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name_en",label:e.$t("organization.deptModules.field.nameEn"),width:"360"}}),e._v(" "),n("el-table-column",{attrs:{prop:"parent_id",label:e.$t("organization.deptModules.field.parent"),width:"480"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:e.$t("organization.deptModules.field.action")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v(e._s(e.$t("actions.edit")))]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("actions.delete")))])]}}])})],1),e._v(" "),n("edit-department",{attrs:{show:e.showEditDepartment,item:e.deptItem},on:{"update:show":function(t){e.showEditDepartment=t},success:e.getList}})],1)},i=[],o=n("db72"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"720px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:e.$t("organization.deptModules.field.name"),prop:"name"}},[n("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("organization.deptModules.field.nameEn"),prop:"name_en"}},[n("el-input",{model:{value:e.ruleForm.name_en,callback:function(t){e.$set(e.ruleForm,"name_en",t)},expression:"ruleForm.name_en"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("organization.deptModules.field.parent")}},[n("el-popover",{attrs:{placement:"bottom",width:"550"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("div",{staticClass:"parent-node-body"},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.deptList,props:e.defaultProps,"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleClickNode}})],1),e._v(" "),n("el-input",{attrs:{slot:"reference",readonly:""},slot:"reference",model:{value:e.parentname,callback:function(t){e.parentname=t},expression:"parentname"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n      "+e._s(e.$t("actions.cancel"))+"\n    ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("\n      "+e._s(e.$t("actions.confirm"))+"\n    ")])],1)],1)},r=[],l=(n("7f7f"),n("bd86")),c=n("7a9c"),d=n("d368"),u=n("2f62"),m={mixins:[c["a"]],props:{show:{type:Boolean,default:!1},item:""},watch:Object(l["a"])({filterText:function(e){this.$refs.tree.filter(e)},dialogFormVisible:function(e){e||(this.open=!1,this.$emit("update:show",!1))},show:function(e){this.dialogFormVisible=e,e&&(this.item?(this.ruleForm=this.assign(this.ruleForm,this.item),this.dialogStatus="update"):(this.parentname="",this.ruleForm={id:void 0,name:"",name_en:"",parent_id:void 0},this.dialogStatus="create"))}},"filterText",(function(e){this.$refs.tree.filter(e)})),computed:Object(o["a"])({},Object(u["b"])(["deptList"])),data:function(){return{open:!1,dialogFormVisible:this.show,dialogStatus:this.item?"update":"create",textMap:{update:"".concat(this.$t("actions.edit")),create:"".concat(this.$t("actions.create"))},parentname:"",ruleForm:{id:void 0,name:"",name_en:"",parent_id:void 0},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],name_en:[{required:!0,message:"请输入部门英文名称",trigger:"blur"}]},filterText:"",defaultProps:{children:"childs",label:"name"}}},methods:{handleClickNode:function(e){this.ruleForm.parent_id=e.id,this.parentname=e.name,this.open=!1},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},close:function(){this.dialogFormVisible=!1},createData:function(){var e=this;Object(d["a"])(this.ruleForm).then((function(){e.$message({message:"创建部门成功",type:"success"}),e.$emit("success"),e.close()}))},updateData:function(){var e=this;Object(d["h"])(this.ruleForm).then((function(){e.$message({message:"修改部门成功",type:"success"}),e.$emit("success"),e.close()}))}}},p=m,f=(n("7516"),n("2877")),h=Object(f["a"])(p,s,r,!1,null,null,null),b=h.exports,g={mixins:[c["a"]],name:"deptManage",components:{EditDepartment:b},created:function(){this.getList()},data:function(){return{showEditDepartment:!1,deptItem:""}},computed:Object(o["a"])({},Object(u["b"])(["deptList"])),methods:{getList:function(){this.$store.dispatch("organization/getDeptList",{page:1,limit:500}).then((function(e){}))},handleAdd:function(){this.deptItem="",this.showEditDepartment=!0},handleEdit:function(e){this.deptItem=e,this.showEditDepartment=!0},handleDelete:function(e){var t=this;this.$confirm("确定要删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["c"])({id:[e.id]}).then((function(){t.$message({type:"success",message:"删除成功!"}),t.getList()}))})).catch((function(){}))}}},v=g,_=(n("ac8d"),Object(f["a"])(v,a,i,!1,null,null,null));t["default"]=_.exports},ac8d:function(e,t,n){"use strict";var a=n("8ef4"),i=n.n(a);i.a}}]);